device = "cpu"                # Explicitly uses CPU (replace with "cuda" if you have GPU)
run_type = "staged_learning"  # Required top-level field

[parameters]
summary_csv_prefix = "pde4_scaffold1_stage1"  # Your Stage 1 output prefix
use_checkpoint = false
purge_memories = false
prior_file = "/home/swaroop/REINVENT4/priors/reinvent.prior"  # Your prior model
agent_file = "/home/swaroop/REINVENT4/priors/reinvent.prior"  # Start fresh, not from previous run
batch_size = 64
unique_sequences = true
randomize_smiles = true
tb_isim = false

[learning_strategy]
type = "dap"
sigma = 128
rate = 0.0001

[diversity_filter]
type = "IdenticalMurckoScaffold"  # Prevents redundant Murcko scaffolds
bucket_size = 25
minscore = 0.7                     # Optional: Only keep scaffolds above this score

[[stage]]
max_steps = 500                    # Number of learning steps
chkpt_file = "scaffold1_maxsim.chkpt"  # Stage 1 checkpoint file
termination = "simple"             # Terminate on max_steps or max_score
max_score = 0.8                    # Optional: Set a high target for early stopping
min_steps = 25

[stage.scoring]
type = "geometric_mean"            # Scoring function

[[stage.scoring.component]]
[stage.scoring.component.tanimoto_similarity]
[[stage.scoring.component.tanimoto_similarity.endpoint]]
name = "Scaffold Similarity"
weight = 1.0                       # 100% weight on similarity
params.smiles = ["B1([C@@H]2C[C@@H]2C3=C(O1)C(=C(C=C3)F)C(=O)O)O"]  # Your PDE4 scaffold
params.threshold = 0.6             # Reject below this Tanimoto similarity
params.radius = 2
params.use_counts = true
params.use_features = false
